<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="salesMapper">

	<!-- 상품 리스트 조회(장미경) -->
	<select id="selectListProduct" resultType="Product">
		select DISTINCT PRODUCT_NAME
		from product
        where PRODUCT_STAUS = 'Y'
        order by PRODUCT_NAME	
	</select>
	
	<!-- 트레이너 조회(장미경) -->
	<select id="selectListTrainer" resultType="Trainer">
		select TRAINER_NAME
    	from trainer
    	order by TRAINER_NAME
	</select>
	
	<!-- 매출 리스트 조회(장미경) -->
	<select id="selectListSalesDto" parameterType="SalesSearchDto" resultType="SalesDto">
	    select Pay_Date, Product_Category, Product_Name, Member_Trainer, Member_Name, Pay_Price, Pay_Type 
	    from PayInfo
	    join Product using(Product_No)
	    join Member using(Member_No)
	    where Pay_Date between to_date(#{startDate}, 'YYYY-MM-DD') and to_date(#{endDate}, 'YYYY-MM-DD')
	    order by Pay_Date desc
	</select>
	
	<!-- 매출 리스트 검색(장미경) -->
	<!-- searchStr=, startDate=2020-01-03, endDate=2020-05-15, searchProduct=, searchTrainer= -->
	<select id="searchListSalesDto" parameterType="SalesSearchDto" resultType="SalesDto">
	    select Pay_Date, Product_Category, Product_Name, Member_Trainer, Member_Name, Pay_Price, Pay_Type 
	    from PayInfo
	    join Product using(Product_No)
	    join Member using(Member_No)
	    where Pay_Date between to_date(#{startDate}, 'YYYY-MM-DD') and to_date(#{endDate}, 'YYYY-MM-DD') 
	    order by Pay_Date desc
	</select>

</mapper>
